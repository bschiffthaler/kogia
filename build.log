
docker pull alpine
+ docker pull alpine
Using default tag: latest
latest: Pulling from library/alpine
Digest: sha256:185518070891758909c9f839cf4ca393ee977ac378609f700f60a771a2dfe321
Status: Image is up to date for alpine:latest
docker.io/library/alpine:latest

find . -mindepth 1 -maxdepth 1 -type d | while read d
do
  db=$(basename $d)
  if [[ $db =~ ^\. ]] || [ $db = "scripts" ]
  then
    continue
  fi
  DTEST=$(docker images | grep "bschiffthaler/${db}" || true)
  if [ ! -z "$DTEST" ]; then
    continue
  else
    pushd $d
    docker build --build-arg=BUILD_NCPU=8 -t bschiffthaler/${db} .
    VERSION=$(docker inspect --format '{{index .ContainerConfig.Labels "software.version"}}' bschiffthaler/${db})
    docker tag bschiffthaler/${db} bschiffthaler/${db}:$VERSION
    docker push bschiffthaler/${db}:$VERSION
    docker rm -f $(docker ps -aq) || true
    docker rmi -f $(docker images -q -f dangling=true) || true
    popd
  fi
done
+ find . -mindepth 1 -maxdepth 1 -type d
+ read d
++ basename ./diamond
+ db=diamond
+ [[ diamond =~ ^\. ]]
+ '[' diamond = scripts ']'
++ docker images
++ grep bschiffthaler/diamond
+ DTEST='bschiffthaler/diamond                       2.0.4               13546f8847ac        36 hours ago         12.6MB
bschiffthaler/diamond                       latest              13546f8847ac        36 hours ago         12.6MB'
+ '[' '!' -z 'bschiffthaler/diamond                       2.0.4               13546f8847ac        36 hours ago         12.6MB
bschiffthaler/diamond                       latest              13546f8847ac        36 hours ago         12.6MB' ']'
+ continue
+ read d
++ basename ./star
+ db=star
+ [[ star =~ ^\. ]]
+ '[' star = scripts ']'
++ docker images
++ grep bschiffthaler/star
+ DTEST='bschiffthaler/star                          2.7.5c              4b5a6e0dc739        36 hours ago         14.9MB
bschiffthaler/star                          latest              4b5a6e0dc739        36 hours ago         14.9MB'
+ '[' '!' -z 'bschiffthaler/star                          2.7.5c              4b5a6e0dc739        36 hours ago         14.9MB
bschiffthaler/star                          latest              4b5a6e0dc739        36 hours ago         14.9MB' ']'
+ continue
+ read d
++ basename ./bwa
+ db=bwa
+ [[ bwa =~ ^\. ]]
+ '[' bwa = scripts ']'
++ docker images
++ grep bschiffthaler/bwa
+ DTEST='bschiffthaler/bwa                           0.7.17              4de799192847        36 hours ago         8.07MB
bschiffthaler/bwa                           latest              4de799192847        36 hours ago         8.07MB'
+ '[' '!' -z 'bschiffthaler/bwa                           0.7.17              4de799192847        36 hours ago         8.07MB
bschiffthaler/bwa                           latest              4de799192847        36 hours ago         8.07MB' ']'
+ continue
+ read d
++ basename ./.git
+ db=.git
+ [[ .git =~ ^\. ]]
+ continue
+ read d
++ basename ./sed
+ db=sed
+ [[ sed =~ ^\. ]]
+ '[' sed = scripts ']'
++ docker images
++ grep bschiffthaler/sed
+ DTEST='bschiffthaler/sed                           4.8-r0              5bb71a987107        33 hours ago         7.77MB
bschiffthaler/sed                           latest              5bb71a987107        33 hours ago         7.77MB'
+ '[' '!' -z 'bschiffthaler/sed                           4.8-r0              5bb71a987107        33 hours ago         7.77MB
bschiffthaler/sed                           latest              5bb71a987107        33 hours ago         7.77MB' ']'
+ continue
+ read d
++ basename ./.ncbi-eutils
+ db=.ncbi-eutils
+ [[ .ncbi-eutils =~ ^\. ]]
+ continue
+ read d
++ basename ./trimmomatic
+ db=trimmomatic
+ [[ trimmomatic =~ ^\. ]]
+ '[' trimmomatic = scripts ']'
++ docker images
++ grep bschiffthaler/trimmomatic
+ DTEST='bschiffthaler/trimmomatic                   0.39                4bf710bcbbf2        33 hours ago         80.6MB
bschiffthaler/trimmomatic                   latest              4bf710bcbbf2        33 hours ago         80.6MB'
+ '[' '!' -z 'bschiffthaler/trimmomatic                   0.39                4bf710bcbbf2        33 hours ago         80.6MB
bschiffthaler/trimmomatic                   latest              4bf710bcbbf2        33 hours ago         80.6MB' ']'
+ continue
+ read d
++ basename ./curl
+ db=curl
+ [[ curl =~ ^\. ]]
+ '[' curl = scripts ']'
++ docker images
++ grep bschiffthaler/curl
+ DTEST='bschiffthaler/curl                          7_72_0              925567528367        33 hours ago         13.1MB
bschiffthaler/curl                          latest              925567528367        33 hours ago         13.1MB'
+ '[' '!' -z 'bschiffthaler/curl                          7_72_0              925567528367        33 hours ago         13.1MB
bschiffthaler/curl                          latest              925567528367        33 hours ago         13.1MB' ']'
+ continue
+ read d
++ basename ./trmap
+ db=trmap
+ [[ trmap =~ ^\. ]]
+ '[' trmap = scripts ']'
++ grep bschiffthaler/trmap
++ docker images
+ DTEST='bschiffthaler/trmap                         0.12.1              3ce8a60d2b4b        33 hours ago         9.64MB
bschiffthaler/trmap                         latest              3ce8a60d2b4b        33 hours ago         9.64MB'
+ '[' '!' -z 'bschiffthaler/trmap                         0.12.1              3ce8a60d2b4b        33 hours ago         9.64MB
bschiffthaler/trmap                         latest              3ce8a60d2b4b        33 hours ago         9.64MB' ']'
+ continue
+ read d
++ basename ./wtdbg2
+ db=wtdbg2
+ [[ wtdbg2 =~ ^\. ]]
+ '[' wtdbg2 = scripts ']'
++ docker images
++ grep bschiffthaler/wtdbg2
+ DTEST='bschiffthaler/wtdbg2                        2.5                 6ea7666cd8d6        25 hours ago         45.5MB
bschiffthaler/wtdbg2                        latest              6ea7666cd8d6        25 hours ago         45.5MB'
+ '[' '!' -z 'bschiffthaler/wtdbg2                        2.5                 6ea7666cd8d6        25 hours ago         45.5MB
bschiffthaler/wtdbg2                        latest              6ea7666cd8d6        25 hours ago         45.5MB' ']'
+ continue
+ read d
++ basename ./basespace
+ db=basespace
+ [[ basespace =~ ^\. ]]
+ '[' basespace = scripts ']'
++ docker images
++ grep bschiffthaler/basespace
+ DTEST='bschiffthaler/basespace                     1.2.1               44f8c394d913        25 hours ago         210MB
bschiffthaler/basespace                     latest              44f8c394d913        25 hours ago         210MB'
+ '[' '!' -z 'bschiffthaler/basespace                     1.2.1               44f8c394d913        25 hours ago         210MB
bschiffthaler/basespace                     latest              44f8c394d913        25 hours ago         210MB' ']'
+ continue
+ read d
++ basename ./bowtie
+ db=bowtie
+ [[ bowtie =~ ^\. ]]
+ '[' bowtie = scripts ']'
++ docker images
++ grep bschiffthaler/bowtie
+ DTEST='bschiffthaler/bowtie                        1.3.0               cc306bdababa        25 hours ago         57.1MB
bschiffthaler/bowtie                        latest              cc306bdababa        25 hours ago         57.1MB'
+ '[' '!' -z 'bschiffthaler/bowtie                        1.3.0               cc306bdababa        25 hours ago         57.1MB
bschiffthaler/bowtie                        latest              cc306bdababa        25 hours ago         57.1MB' ']'
+ continue
+ read d
++ basename ./trim-galore
+ db=trim-galore
+ [[ trim-galore =~ ^\. ]]
+ '[' trim-galore = scripts ']'
++ docker images
++ grep bschiffthaler/trim-galore
+ DTEST='bschiffthaler/trim-galore                   0.6.5               8e50b64b5bd8        25 hours ago         165MB
bschiffthaler/trim-galore                   latest              8e50b64b5bd8        25 hours ago         165MB'
+ '[' '!' -z 'bschiffthaler/trim-galore                   0.6.5               8e50b64b5bd8        25 hours ago         165MB
bschiffthaler/trim-galore                   latest              8e50b64b5bd8        25 hours ago         165MB' ']'
+ continue
+ read d
++ basename ./gffread
+ db=gffread
+ [[ gffread =~ ^\. ]]
+ '[' gffread = scripts ']'
++ docker images
++ grep bschiffthaler/gffread
+ DTEST='bschiffthaler/gffread                       0.12.1              1fc044880d7c        25 hours ago         9.65MB
bschiffthaler/gffread                       latest              1fc044880d7c        25 hours ago         9.65MB'
+ '[' '!' -z 'bschiffthaler/gffread                       0.12.1              1fc044880d7c        25 hours ago         9.65MB
bschiffthaler/gffread                       latest              1fc044880d7c        25 hours ago         9.65MB' ']'
+ continue
+ read d
++ basename ./samtools
+ db=samtools
+ [[ samtools =~ ^\. ]]
+ '[' samtools = scripts ']'
++ docker images
++ grep bschiffthaler/samtools
+ DTEST='bschiffthaler/samtools                      1.10                f6f230412675        25 hours ago         10.2MB
bschiffthaler/samtools                      latest              f6f230412675        25 hours ago         10.2MB'
+ '[' '!' -z 'bschiffthaler/samtools                      1.10                f6f230412675        25 hours ago         10.2MB
bschiffthaler/samtools                      latest              f6f230412675        25 hours ago         10.2MB' ']'
+ continue
+ read d
++ basename ./stacks
+ db=stacks
+ [[ stacks =~ ^\. ]]
+ '[' stacks = scripts ']'
++ docker images
++ grep bschiffthaler/stacks
+ DTEST='bschiffthaler/stacks                        2.53                caca4020aa95        10 hours ago         127MB
bschiffthaler/stacks                        latest              caca4020aa95        10 hours ago         127MB'
+ '[' '!' -z 'bschiffthaler/stacks                        2.53                caca4020aa95        10 hours ago         127MB
bschiffthaler/stacks                        latest              caca4020aa95        10 hours ago         127MB' ']'
+ continue
+ read d
++ basename ./scripts
+ db=scripts
+ [[ scripts =~ ^\. ]]
+ '[' scripts = scripts ']'
+ continue
+ read d
++ basename ./gffcompare
+ db=gffcompare
+ [[ gffcompare =~ ^\. ]]
+ '[' gffcompare = scripts ']'
++ docker images
++ grep bschiffthaler/gffcompare
+ DTEST='bschiffthaler/gffcompare                    0.12.1              ed8ff8758bd6        10 hours ago         9.78MB
bschiffthaler/gffcompare                    latest              ed8ff8758bd6        10 hours ago         9.78MB'
+ '[' '!' -z 'bschiffthaler/gffcompare                    0.12.1              ed8ff8758bd6        10 hours ago         9.78MB
bschiffthaler/gffcompare                    latest              ed8ff8758bd6        10 hours ago         9.78MB' ']'
+ continue
+ read d
++ basename ./ncbi-blast
+ db=ncbi-blast
+ [[ ncbi-blast =~ ^\. ]]
+ '[' ncbi-blast = scripts ']'
++ docker images
++ grep bschiffthaler/ncbi-blast
+ DTEST='bschiffthaler/ncbi-blast                    2.10.1              c92e32ac39f2        10 hours ago         132MB
bschiffthaler/ncbi-blast                    latest              c92e32ac39f2        10 hours ago         132MB'
+ '[' '!' -z 'bschiffthaler/ncbi-blast                    2.10.1              c92e32ac39f2        10 hours ago         132MB
bschiffthaler/ncbi-blast                    latest              c92e32ac39f2        10 hours ago         132MB' ']'
+ continue
+ read d
++ basename ./fastqc
+ db=fastqc
+ [[ fastqc =~ ^\. ]]
+ '[' fastqc = scripts ']'
++ docker images
++ grep bschiffthaler/fastqc
+ DTEST='bschiffthaler/fastqc                        latest              8bd5a5a727ce        4 months ago         153MB'
+ '[' '!' -z 'bschiffthaler/fastqc                        latest              8bd5a5a727ce        4 months ago         153MB' ']'
+ continue
+ read d
++ basename ./salmon
+ db=salmon
+ [[ salmon =~ ^\. ]]
+ '[' salmon = scripts ']'
++ docker images
++ grep bschiffthaler/salmon
+ DTEST='bschiffthaler/salmon                        1.3.0               2f5804d6ac63        10 hours ago         19.9MB
bschiffthaler/salmon                        latest              2f5804d6ac63        10 hours ago         19.9MB'
+ '[' '!' -z 'bschiffthaler/salmon                        1.3.0               2f5804d6ac63        10 hours ago         19.9MB
bschiffthaler/salmon                        latest              2f5804d6ac63        10 hours ago         19.9MB' ']'
+ continue
+ read d
++ basename ./bedtools
+ db=bedtools
+ [[ bedtools =~ ^\. ]]
+ '[' bedtools = scripts ']'
++ docker images
++ grep bschiffthaler/bedtools
+ DTEST='bschiffthaler/bedtools                      2.29.2              4f86769f98ce        10 hours ago         10.5MB
bschiffthaler/bedtools                      latest              4f86769f98ce        10 hours ago         10.5MB'
+ '[' '!' -z 'bschiffthaler/bedtools                      2.29.2              4f86769f98ce        10 hours ago         10.5MB
bschiffthaler/bedtools                      latest              4f86769f98ce        10 hours ago         10.5MB' ']'
+ continue
+ read d
++ basename ./awk
+ db=awk
+ [[ awk =~ ^\. ]]
+ '[' awk = scripts ']'
++ docker images
++ grep bschiffthaler/awk
+ DTEST='bschiffthaler/awk                           5.1.0-r0            a25faea4594e        10 hours ago         8.36MB
bschiffthaler/awk                           latest              a25faea4594e        10 hours ago         8.36MB'
+ '[' '!' -z 'bschiffthaler/awk                           5.1.0-r0            a25faea4594e        10 hours ago         8.36MB
bschiffthaler/awk                           latest              a25faea4594e        10 hours ago         8.36MB' ']'
+ continue
+ read d
++ basename ./multiqc
+ db=multiqc
+ [[ multiqc =~ ^\. ]]
+ '[' multiqc = scripts ']'
++ docker images
++ grep bschiffthaler/multiqc
+ DTEST='bschiffthaler/multiqc                       1.9                 f96d0a156580        10 hours ago         56.5MB
bschiffthaler/multiqc                       latest              f96d0a156580        10 hours ago         56.5MB'
+ '[' '!' -z 'bschiffthaler/multiqc                       1.9                 f96d0a156580        10 hours ago         56.5MB
bschiffthaler/multiqc                       latest              f96d0a156580        10 hours ago         56.5MB' ']'
+ continue
+ read d
++ basename ./flye
+ db=flye
+ [[ flye =~ ^\. ]]
+ '[' flye = scripts ']'
++ docker images
++ grep bschiffthaler/flye
+ DTEST='bschiffthaler/flye                          2.8.1               d3aa97b6643a        10 hours ago         93.2MB
bschiffthaler/flye                          latest              d3aa97b6643a        10 hours ago         93.2MB'
+ '[' '!' -z 'bschiffthaler/flye                          2.8.1               d3aa97b6643a        10 hours ago         93.2MB
bschiffthaler/flye                          latest              d3aa97b6643a        10 hours ago         93.2MB' ']'
+ continue
+ read d
++ basename ./htslib
+ db=htslib
+ [[ htslib =~ ^\. ]]
+ '[' htslib = scripts ']'
++ docker images
++ grep bschiffthaler/htslib
+ DTEST='bschiffthaler/htslib                        1.10.2              f976b4ffa9b7        10 hours ago         15.8MB
bschiffthaler/htslib                        latest              f976b4ffa9b7        10 hours ago         15.8MB'
+ '[' '!' -z 'bschiffthaler/htslib                        1.10.2              f976b4ffa9b7        10 hours ago         15.8MB
bschiffthaler/htslib                        latest              f976b4ffa9b7        10 hours ago         15.8MB' ']'
+ continue
+ read d
++ basename ./kallisto
+ db=kallisto
+ [[ kallisto =~ ^\. ]]
+ '[' kallisto = scripts ']'
++ docker images
++ grep bschiffthaler/kallisto
+ DTEST='bschiffthaler/kallisto                      0.46.2              a89017a494da        5 minutes ago        10.6MB
bschiffthaler/kallisto                      latest              a89017a494da        5 minutes ago        10.6MB'
+ '[' '!' -z 'bschiffthaler/kallisto                      0.46.2              a89017a494da        5 minutes ago        10.6MB
bschiffthaler/kallisto                      latest              a89017a494da        5 minutes ago        10.6MB' ']'
+ continue
+ read d
++ basename ./bcftools
+ db=bcftools
+ [[ bcftools =~ ^\. ]]
+ '[' bcftools = scripts ']'
++ docker images
++ grep bschiffthaler/bcftools
+ DTEST='bschiffthaler/bcftools                      1.10.2              0280f31a4628        4 minutes ago        11.6MB
bschiffthaler/bcftools                      latest              0280f31a4628        4 minutes ago        11.6MB'
+ '[' '!' -z 'bschiffthaler/bcftools                      1.10.2              0280f31a4628        4 minutes ago        11.6MB
bschiffthaler/bcftools                      latest              0280f31a4628        4 minutes ago        11.6MB' ']'
+ continue
+ read d
++ basename ./minimap2
+ db=minimap2
+ [[ minimap2 =~ ^\. ]]
+ '[' minimap2 = scripts ']'
++ docker images
++ grep bschiffthaler/minimap2
+ DTEST='bschiffthaler/minimap2                      2.17                0507fd831f0e        3 minutes ago        7.89MB
bschiffthaler/minimap2                      latest              0507fd831f0e        3 minutes ago        7.89MB'
+ '[' '!' -z 'bschiffthaler/minimap2                      2.17                0507fd831f0e        3 minutes ago        7.89MB
bschiffthaler/minimap2                      latest              0507fd831f0e        3 minutes ago        7.89MB' ']'
+ continue
+ read d
++ basename ./sortmerna
+ db=sortmerna
+ [[ sortmerna =~ ^\. ]]
+ '[' sortmerna = scripts ']'
++ docker images
++ grep bschiffthaler/sortmerna
+ DTEST='bschiffthaler/sortmerna                     4.2.0               5a7fad61bb83        3 minutes ago        14.7MB
bschiffthaler/sortmerna                     latest              5a7fad61bb83        3 minutes ago        14.7MB'
+ '[' '!' -z 'bschiffthaler/sortmerna                     4.2.0               5a7fad61bb83        3 minutes ago        14.7MB
bschiffthaler/sortmerna                     latest              5a7fad61bb83        3 minutes ago        14.7MB' ']'
+ continue
+ read d
++ basename ./spades
+ db=spades
+ [[ spades =~ ^\. ]]
+ '[' spades = scripts ']'
++ docker images
++ grep bschiffthaler/spades
+ DTEST='bschiffthaler/spades                        3.14.1              cde890661a78        2 minutes ago        121MB
bschiffthaler/spades                        latest              cde890661a78        2 minutes ago        121MB'
+ '[' '!' -z 'bschiffthaler/spades                        3.14.1              cde890661a78        2 minutes ago        121MB
bschiffthaler/spades                        latest              cde890661a78        2 minutes ago        121MB' ']'
+ continue
+ read d
++ basename ./bbtools
+ db=bbtools
+ [[ bbtools =~ ^\. ]]
+ '[' bbtools = scripts ']'
++ docker images
++ grep bschiffthaler/bbtools
+ DTEST='bschiffthaler/bbtools                       38.86               6d80bd5a7582        About a minute ago   203MB
bschiffthaler/bbtools                       latest              6d80bd5a7582        About a minute ago   203MB'
+ '[' '!' -z 'bschiffthaler/bbtools                       38.86               6d80bd5a7582        About a minute ago   203MB
bschiffthaler/bbtools                       latest              6d80bd5a7582        About a minute ago   203MB' ']'
+ continue
+ read d
++ basename ./stringtie
+ db=stringtie
+ [[ stringtie =~ ^\. ]]
+ '[' stringtie = scripts ']'
++ docker images
++ grep bschiffthaler/stringtie
+ DTEST='bschiffthaler/stringtie                     2.1.4               ce936131d82d        33 seconds ago       10.4MB
bschiffthaler/stringtie                     latest              ce936131d82d        33 seconds ago       10.4MB'
+ '[' '!' -z 'bschiffthaler/stringtie                     2.1.4               ce936131d82d        33 seconds ago       10.4MB
bschiffthaler/stringtie                     latest              ce936131d82d        33 seconds ago       10.4MB' ']'
+ continue
+ read d
++ basename ./cutadapt
+ db=cutadapt
+ [[ cutadapt =~ ^\. ]]
+ '[' cutadapt = scripts ']'
++ docker images
++ grep bschiffthaler/cutadapt
+ DTEST='bschiffthaler/cutadapt                      latest              7a8f6864822e        3 weeks ago          14.3MB'
+ '[' '!' -z 'bschiffthaler/cutadapt                      latest              7a8f6864822e        3 weeks ago          14.3MB' ']'
+ continue
+ read d
